# snowball-packages 

This is the repository for which Snowball packages are indexed for use with Snowflake. Used in conjunction with `snowball.exe` 

##Submission Guidelines
**Use `snowball publish` to submit your package (plugin, theme, or emulator) to this repository to ensure it meets the guidelines for acceptance**

1. Your plugin, theme, or emulator must be published in the `.snowball` format, with a `snowball.json` at the root of the snowball package. You can create a snowball using the `snowball make` or `snowball publish` commands.

2. Your packaged snowball filename must be in the format `type!name-x.y.z.snowball`, where `type` is either `plugin`, `emulatorassembly`, or `theme`, `name` is the unique name of your plugin, and `x.y.z` is the semantic version of your package. Using a `snowball make-*` method will output this name format by default. 

3. Your packaged snowball must be hosted on NuGet.org with the format `snowflake-snowball-Type-Name`, where `Type` is either `Plugin`, `EmulatorAssembly` or `Theme`, and `Name` is the unique name of your plugin. The submitted version `x.y.z` must be available in the NuGet repository. It must not have any NuGet dependencies, dependencies must be specified in `snowball.json` and be installable as a snowball that fulfills all the requirements listed here.

4. Your packaged `.nupkg` file must have 3 files in it's root of the archive, `type!name-x.y.z.snowball`, `type!name-x.y.z.snowball.key` and `type!name-x.y.z.snowball.sig`, where `type!name-x.y.z.snowball.key` is the RSA public key of a public/private key pair that was used to sign with SHA512 `type!name-x.y.z.snowball.sig`, which is the signed SHA256 FileHash of the snowball file. 

5. Your snowball package must be signed **properly**. This means that `signature.bin` must be verifiable with the public key found in the `pub` section of your release index file, which when read must equal the SHA256 value of `type!name-x.y.z.snowball` found in the same `.nupkg` file. Although the snowball file `type!name-x.y.z.snowball` will remain readable after signing, `snowball.exe` will refuse to install the package if the signatures are not verifiable unless specifically told to. The signatures ensures that the archive has not been tampered with, and ensure sole responsiblity on the author of the package for it's contents. These keys are generated at packaging time when using `snowball publish` as is recommended. Your RSA private keys are then stored in **plaintext** on your local computer and re-used to sign packages with the same ID, in order to ensure your identity. Do not share your keys, or others will be able to update your packages without your permission.

6. You will submit your plugin to the repository in the form of a pull request modifying the JSON file in the index subdirectory in this repository named `name.type.rel.json`. If already existing, the pull request should only add lines to the `version` key which will indicate that a new version is available in the NuGet repository. Any pull requests that have merge conflicts will not be accepted. `snowball publish` will handle this for you, and we will accept your automatically generated pull request once we have confirmed that the NuGet package is signed correctly and is free of malicious intent.

7. You may be required to show source code for your plugins to the repository maintainers before your plugin is accepted. There is no requirement that your plugin or theme has to be open source, but we will need to audit all packages to ensure they are free of malicious intent.

The repository maintainers will try their best to ensure no malicious code is uploaded to our plugin index. However, we are not responsible for any harm or damage incurred as a result of using this service. Do note that uploading malicious code is a violation of the [GitHub Terms of Service](https://help.github.com/articles/github-terms-of-service/) and the [NuGet.org Terms of Use](https://www.nuget.org/policies/Terms), of which you must have already explicitly agreed to when publishing plugins to this repository. Failure to comply will result in the removal of **all** packages submitted by your account from this repository, and we will report your relevant accounts on both services to their respective operators, which may then decide to suspend your account under their discretion.

To use `snowball publish`, you must enter your [NuGet API Key](https://www.nuget.org/account) and your GitHub details using `snowball setup`. Your GitHub details are used to create a token solely for use with `snowball` with the `public_repo`,      `repo:status`, `repo`,`user`, and `repo_deployment` scopes. Your raw GitHub account details are never saved. Both the GitHub token and the NuGet API keys are then securely encrypted using DPAPI with your [computer user account details](https://msdn.microsoft.com/en-us/library/system.security.cryptography.dataprotectionscope(v=vs.110).aspx) and saved locally. 
